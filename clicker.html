<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Clicker Galactique</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: linear-gradient(135deg,#1e1e1e,#111);
            color: #fff;
            margin: 0;
            overflow: hidden;
        }

        h1 { margin-top: 20px; font-size: 36px; }

        #clickButton {
            font-size: 34px;
            padding: 20px 40px;
            margin: 20px 0;
            border: none;
            border-radius: 15px;
            background-color: #a59a8c;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        #clickButton:hover {
            transform: scale(1.1) rotate(2deg);
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            background-color: #b3a599;
        }

        #clickButton:active {
            transform: scale(0.95) rotate(-2deg);
            box-shadow: 0 3px 10px rgba(0,0,0,0.5);
            background-color: #8c7e70;
        }

        #score { font-size: 32px; margin-bottom: 30px; }

        /* Onglets */
        #tabs {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
        }
        #tabs button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #444;
            color: white;
            font-weight: bold;
        }
        #tabs button:hover { background: #666; }
        .tab { display: none; }
        .tab.active { display: block; }

        /* Shop */
        #shop {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        .shop-item {
            background-color: #2a2a2a;
            border-radius: 12px;
            padding: 15px;
            width: 220px;
            text-align: center;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            transition: transform 0.2s;
        }
        .shop-item:hover { transform: scale(1.05); }
        .shop-item span { display: block; margin-bottom: 10px; }
        .shop-item input { width: 50px; text-align: center; margin-bottom: 10px; }
        .shop-item button {
            background-color: #007aff;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
        }
        .shop-item button:hover { background-color: #005bb5; }

        canvas { position: absolute; top: 0; left: 0; pointer-events: none; }
    </style>
</head>
<body>
    <h1>Clicker Galactique</h1>

    <!-- Onglets déplacés au-dessus du bouton -->
    <div id="tabs">
        <button onclick="showTab('shopTab')">Améliorations</button>
        <button onclick="showTab('prestigeTab')">Prestige</button>
    </div>

    <button id="clickButton">Clique ici!</button>
    <div id="score">Score: 0</div>

    <!-- Onglet Shop -->
    <div id="shopTab" class="tab active">
        <h2>Shop</h2>
        <div id="shop">
            <div class="shop-item">
                <span>Mini Générateur (+1 clic)</span>
                <span id="miniPrice"></span>
                <input type="number" id="miniQty" value="1" min="1">
                <button onclick="buyItem('mini')">Acheter</button>
            </div>
            <div class="shop-item">
                <span>Méga Générateur (+10 clics)</span>
                <span id="megaPrice"></span>
                <input type="number" id="megaQty" value="1" min="1">
                <button onclick="buyItem('mega')">Acheter</button>
            </div>
            <div class="shop-item">
                <span>Ultra Générateur (+100 clics)</span>
                <span id="ultraPrice"></span>
                <input type="number" id="ultraQty" value="1" min="1">
                <button onclick="buyItem('ultra')">Acheter</button>
            </div>
            <div class="shop-item">
                <span>Omega Générateur (+10k clics)</span>
                <span id="OmegaPrice"></span>
                <input type="number" id="OmegaQty" value="1" min="1">
                <button onclick="buyItem('Omega')">Acheter</button>
            </div>
            <div class="shop-item">
                <span>Clic Amélioré (+100k clics)</span>
                <span id="clicAmeliorePrice"></span>
                <input type="number" id="clicAmelioreQty" value="1" min="1">
                <button onclick="buyItem('clicAmeliore')">Acheter</button>
            </div>
            <div class="shop-item">
                <span>Auto Générateur (+50/sec)</span>
                <span id="autoPrice"></span>
                <input type="number" id="autoQty" value="1" min="1">
                <button onclick="buyItem('auto')">Acheter</button>
            </div>
            <div class="shop-item">
                <span>Multiplicateur x2</span>
                <span id="x1000Price"></span>
                <input type="number" id="x1000Qty" value="1" min="1">
                <button onclick="buyItem('x1000')">Acheter</button>
            </div>
        </div>
    </div>

    <!-- Onglet Prestige -->
    <div id="prestigeTab" class="tab">
        <h2>Prestige</h2>
        <p>Points de prestige : <span id="prestigePoints">0</span></p>
        <p>Multiplicateur actuel : x<span id="prestigeMultiplier">1</span></p>
        <button onclick="prestige()">Faire un Prestige</button>

        <h3>Boutique Prestige</h3>
        <div id="prestigeShop">
            <div class="shop-item">
                <span>Boost permanent +20% (coût 5 prestige)</span>
                <button onclick="buyPrestigeUpgrade('boost')">Acheter</button>
            </div>
        </div>
    </div>

    <canvas id="particleCanvas"></canvas>
</body>

<script>
// --- Variables de base ---
let score = 0;
let clicsParClick = 100000000000;
let autoClicsParSec = 0;

const multiplierFactor = 1.73;

const shopItems = {
    mini: { name: "Mini Générateur (+1 clic)", basePrice: 10, value: 1, bought: 0 },
    mega: { name: "Méga Générateur (+10 clics)", basePrice: 100, value: 10, bought: 0 },
    ultra: { name: "Ultra Générateur (+100 clics)", basePrice: 1000, value: 100, bought: 0 },
    auto: { name: "Auto Générateur (+50/sec)", basePrice: 5000, value: 50, bought: 0 },
    clicAmeliore: { name: "Clic Amélioré (+100k clics)", basePrice: 1000000, value: 100000, bought: 0 },
    x1000: { name: "Multiplicateur x2", basePrice: 100000000000, value: 2, bought: 0 },
    Omega: { name: "Omega Générateur (10k clics)", basePrice: 100000, value: 10000, bought: 0 }
};

let currentPrices = {};
for (let key in shopItems) currentPrices[key] = shopItems[key].basePrice;

// --- Prestige ---
let prestigePoints = 0;
let prestigeMultiplier = 1;
let prestigeCount = 0;
let basePrestigeRequirement = 1000000; // 1 million pour commencer

// --- Création dynamique du paragraphe pour le coût du prestige ---
const prestigeTab = document.getElementById("prestigeTab");
const requirementP = document.createElement("p");
requirementP.id = "prestigeRequirementDynamic";
prestigeTab.prepend(requirementP); // le place en haut de l'onglet prestige

function getPrestigeRequirement() {
    return basePrestigeRequirement * Math.pow(5, prestigeCount); // coût = 1M × 10^prestigeCount
}

function updatePrestigeRequirement() {
    requirementP.textContent = "Points nécessaires pour le prestige : " + formatNumber(getPrestigeRequirement());
}

// --- Formatage des nombres ---
function formatNumber(num) {
    if (num < 1000) return num;
    const suffixes = ["k", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc", "No", "De"];
    let exp = Math.floor(Math.log10(num)/3);
    if (exp > suffixes.length) exp = suffixes.length;
    const value = num / Math.pow(1000, exp);
    return value.toFixed(2) + suffixes[exp-1];
}

// --- Mise à jour score et affichages ---
function updateScore() {
    document.getElementById("score").innerText = "Score: " + formatNumber(score);
    document.getElementById("prestigePoints").innerText = prestigePoints;
    document.getElementById("prestigeMultiplier").innerText = prestigeMultiplier.toFixed(2);
    updatePrestigeRequirement(); // met à jour le coût du prestige
}

// --- Fonction de prestige améliorée ---
function prestige() {
    let pointsGagnes = 0;

    // Tant que le score est supérieur au coût actuel du prestige
    while (score >= getPrestigeRequirement()) {
        score -= getPrestigeRequirement();  // retire le coût
        pointsGagnes += 1;                   // gagne un point
        prestigeCount += 1;                  // augmente le compteur de prestige
        prestigeMultiplier *= 1.5;           // applique le multiplicateur
    }

    if (pointsGagnes > 0) {
        // Réinitialisation des items
        for (let key in shopItems) {
            shopItems[key].bought = 0;
            currentPrices[key] = shopItems[key].basePrice;
        }

        updateScore();
        alert(`Prestige réussi ! Tu as gagné ${pointsGagnes} point(s) de prestige. Multiplicateur x${prestigeMultiplier.toFixed(2)}`);
    } else {
        alert("Pas assez de points pour le prestige !");
    }
}



// --- Fonction pour cliquer ---
function clickButton() {
    score += clicsParClick * prestigeMultiplier;
    updateScore();
}

// --- Fonction pour autoclics ---
function autoClick() {
    score += autoClicsParSec * prestigeMultiplier;
    updateScore();
}
setInterval(autoClick, 1000);

// --- Initialisation ---
updateScore();

// --- Shop ---
function updateShopPrices() {
    for (let key in shopItems) {
        document.getElementById(key + "Price").innerText =
            `Prix: ${formatNumber(currentPrices[key])} (acheté: ${shopItems[key].bought})`;
    }
}

document.getElementById("clickButton").addEventListener("click", (e) => {
    score += clicsParClick * prestigeMultiplier;
    updateScore();
    createParticlesAtButton(e);
});

function buyItem(key) {
    let qtyInput = parseInt(document.getElementById(key + "Qty").value);
    if (isNaN(qtyInput) || qtyInput < 1) qtyInput = 1;

    let price = currentPrices[key];
    let factor = (key === "x1000") ? multiplierFactor : 1.09;

    let maxQty = Math.floor(Math.log(1 + (score*(factor-1))/price) / Math.log(factor));
    let qty = Math.min(qtyInput, maxQty);
    if (qty <= 0) { alert("Pas assez de points !"); return; }

    let totalCost = Math.floor(price * (Math.pow(factor, qty)-1)/(factor-1));
    score -= totalCost;

    for (let i=0;i<qty;i++) {
        if (key === "x1000") clicsParClick *= shopItems[key].value;
        else if (key === "auto") autoClicsParSec += shopItems[key].value;
        else clicsParClick += shopItems[key].value;
        shopItems[key].bought++;
    }

    currentPrices[key] = Math.floor(price * Math.pow(factor, qty));
    updateScore();
    updateShopPrices();
}

// --- Prestige shop ---
function buyPrestigeUpgrade(type) {
    if (type === "boost" && prestigePoints >= 5) {
        prestigePoints -= 5;
        prestigeMultiplier += 0.2;
        updateScore();
    } else {
        alert("Pas assez de points de prestige !");
    }
}

// --- Auto clic ---
setInterval(()=>{
    score += autoClicsParSec * prestigeMultiplier;
    updateScore();
}, 1000);

// --- Onglets ---
function showTab(tabId) {
    document.querySelectorAll(".tab").forEach(tab => tab.classList.remove("active"));
    document.getElementById(tabId).classList.add("active");
}

// --- Particules ---
const canvas = document.getElementById('particleCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let particles = [];

window.addEventListener('resize', ()=>{ canvas.width = window.innerWidth; canvas.height = window.innerHeight; });

function createParticlesAtButton(e){
    const rect = e.target.getBoundingClientRect();
    const x = rect.left + rect.width/2;
    const y = rect.top + rect.height/2;
    for(let i=0;i<15;i++){
        particles.push({
            x:x,
            y:y,
            vx:(Math.random()-0.5)*4,
            vy:(Math.random()-1.5)*4,
            alpha:1,
            size:Math.random()*4+2,
            color:`hsl(${Math.random()*360},80%,60%)`
        });
    }
}

function updateParticles(){
    for(let i=particles.length-1;i>=0;i--){
        let p = particles[i];
        p.x+=p.vx; p.y+=p.vy;
        p.alpha-=0.02;
        if(p.alpha<=0) particles.splice(i,1);
    }
}

function drawParticles(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(const p of particles){
        ctx.fillStyle=p.color;
        ctx.globalAlpha=p.alpha;
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
        ctx.fill();
    }
    ctx.globalAlpha=1;
}

function animateParticles(){
    updateParticles();
    drawParticles();
    requestAnimationFrame(animateParticles);
}

animateParticles();
updateShopPrices();
     </script>
</body>
</html>
